(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{2119:function(a,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/community/auth/suiswap-points-login-auth",function(){return e(5852)}])},5852:function(a,t,e){"use strict";e.r(t);var i=e(5893),n=e(3590),s=e.n(n),o=e(2245),l=e(6154),r=e(7294),d=e(1010),u=e(7599),c=e(9769),m=e(3851);let p={avatarUrl:"/images/misc/user-profile-image-test.png",name:"Unknown",point:0,details:[]},f={avatarUrl:"/images/misc/user-profile-image-test.png",name:"Loading",point:0,details:[]};t.default=()=>{let a=(0,r.useRef)(null),[t,e]=(0,r.useState)("loading"),[n,g]=(0,r.useState)(!0),[h,w]=(0,r.useState)(null),[_,b]=(0,r.useState)(null),[x,k]=(0,r.useState)(p);(0,r.useEffect)(()=>{let a=new URLSearchParams(window.location.hash.slice(1)),[t,e]=[a.get("access_token"),a.get("token_type")];w(t),b(e)},[]),(0,r.useEffect)(()=>{let a=async()=>{g(!0),await (0,c.delay)(2e3),g(!1)};a()},[]),(0,r.useEffect)(()=>{if(null===h){e("unknown");return}e("loading");let a=async()=>{let a=await fetch("https://discord.com/api/users/@me",{headers:{authorization:"".concat(_," ").concat(h)}}),t=await a.json(),i=t.id,n=t.username,s=t.avatar,o=void 0!==i&&void 0!==n&&void 0!==s?"https://cdn.discordapp.com/avatars/".concat(i,"/").concat(s,".jpg"):void 0,r=0,d=[];if(void 0!==i){try{var u,c;let a=await l.Z.get("https://vivi.one/discord-bot/suiswap-points",{params:{userId:i}}),t=a.data;r=null!==(u=t.point)&&void 0!==u?u:0,d=null!==(c=t.details)&&void 0!==c?c:[]}catch(a){return}k({avatarUrl:null!=o?o:"/images/misc/user-profile-image-test.png",name:null!=n?n:"",point:r,details:d}),e("done")}};a()},[h,_]);let v=p;return"loading"===t?v=f:"done"===t&&(v={...p,...x}),(0,i.jsx)(m.$Q,{children:(0,i.jsxs)("div",{ref:a,style:{margin:"0px",width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"#f9f9f9"},children:[(0,i.jsx)(d.A,{}),(0,i.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0px"},children:(0,i.jsxs)("div",{className:s()["modal-background-content-frame"],children:[(0,i.jsxs)("div",{className:s()["modal-background-frame-title-frame"],style:{width:486},children:[(0,i.jsx)("span",{className:s()["modal-background-frame-title"],children:"Suiswap Point"}),(0,i.jsx)("span",{className:s()["modal-background-frame-subtitle"],children:"Your Suiswap Point is"})]}),"loading"===t||n?(0,i.jsx)("div",{children:(0,i.jsx)(o.Dots,{color:"black"})}):(0,i.jsx)("div",{style:{boxShadow:"-21px 24px 11px rgba(204, 201, 201, 0.25)",borderRadius:"40px",maxWidth:400},children:(0,i.jsx)(u.fQ,{...v})})]})})]})})}},3590:function(a){a.exports={"modal-background-content-frame":"suiswap-points-login-auth_modal-background-content-frame__6U4oW","modal-background-frame-subtitle":"suiswap-points-login-auth_modal-background-frame-subtitle__cf2Bm","modal-background-frame-title":"suiswap-points-login-auth_modal-background-frame-title__WLjEP","modal-background-frame-title-frame":"suiswap-points-login-auth_modal-background-frame-title-frame__ZcJu9"}}},function(a){a.O(0,[307,735,993,599,774,888,179],function(){return a(a.s=2119)}),_N_E=a.O()}]);